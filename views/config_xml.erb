<?xml version="1.0" encoding="UTF-8"?>
<% url = "#{protocol}://#{request.host_with_port}/lti_launch" %>
<% link_text = params['link_text'] && params['link_text'].length > 0 ? params['link_text'] : "Feeds" %>
<cartridge_basiclti_link xmlns="http://www.imsglobal.org/xsd/imslticc_v1p0"
    xmlns:blti = "http://www.imsglobal.org/xsd/imsbasiclti_v1p0"
    xmlns:lticm ="http://www.imsglobal.org/xsd/imslticm_v1p0"
    xmlns:lticp ="http://www.imsglobal.org/xsd/imslticp_v1p0"
    xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation = "http://www.imsglobal.org/xsd/imslticc_v1p0 http://www.imsglobal.org/xsd/lti/ltiv1p0/imslticc_v1p0.xsd
    http://www.imsglobal.org/xsd/imsbasiclti_v1p0 http://www.imsglobal.org/xsd/lti/ltiv1p0/imsbasiclti_v1p0.xsd
    http://www.imsglobal.org/xsd/imslticm_v1p0 http://www.imsglobal.org/xsd/lti/ltiv1p0/imslticm_v1p0.xsd
    http://www.imsglobal.org/xsd/imslticp_v1p0 http://www.imsglobal.org/xsd/lti/ltiv1p0/imslticp_v1p0.xsd">
  <blti:title><%= link_text %></blti:title>
  <blti:description>Do it and stuff</blti:description>
  <blti:launch_url><%= url %></blti:launch_url>
  <blti:extensions platform="canvas.instructure.com">
    <lticm:property name="privacy_level">public</lticm:property>
    <lticm:property name="tool_id">feed_the_lti</lticm:property>
    <% if params['course_nav'] %>
      <lticm:options name="course_navigation">
        <lticm:property name="url"><%= url %></lticm:property>
        <lticm:property name="text"><%= link_text %></lticm:property>
        <lticm:property name="enabled">true</lticm:property>
      </lticm:options>
    <% end %>
    <% if params['homework_submission'] %>
      <lticm:options name="homework_submission">
        <lticm:property name="enabled">true</lticm:property>
        <lticm:property name="url"><%= url %></lticm:property>
        <lticm:property name="selection_width">830</lticm:property>
        <lticm:property name="selection_height">500</lticm:property>
      </lticm:options>
    <% end %>
  </blti:extensions>
  <cartridge_bundle identifierref="BLTI001_Bundle"/>
  <cartridge_icon identifierref="BLTI001_Icon"/>
</cartridge_basiclti_link>  

